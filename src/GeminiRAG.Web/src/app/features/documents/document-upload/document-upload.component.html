<div class="upload-container mt-4 p-6 border-2 border-dashed rounded-lg text-center transition-all"
    [ngClass]="isDragging ? 'border-primary bg-blue-50' : 'border-gray-300 hover:bg-gray-50'"
    (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)" (drop)="onDrop($event)">

    <input type="file" #fileInput (change)="onFileSelected($event)" [accept]="acceptedTypes" multiple class="hidden">

    <div *ngIf="selectedFiles.length === 0 && !isUploading">
        <mat-icon class="text-6xl text-gray-400">cloud_upload</mat-icon>
        <p class="mt-2 text-lg text-gray-600">Drag and drop files here</p>
        <p class="text-sm text-gray-500">Supports 100+ file types: PDF, DOCX, TXT, MD, code files & more</p>
        <button mat-raised-button color="primary" (click)="fileInput.click()" class="mt-3">
            <mat-icon>folder_open</mat-icon> Browse Files
        </button>
        <br>
        <button mat-button color="accent" (click)="showSupportedTypes()" class="mt-2 text-xs">
            <mat-icon class="text-sm">info</mat-icon> View all supported types
        </button>
        <p class="mt-2 text-xs text-gray-400">Multiple files supported</p>
    </div>

    <div *ngIf="selectedFiles.length > 0 && !isUploading">
        <p class="text-lg font-medium mb-3">{{ selectedFiles.length }} file(s) selected</p>
        <mat-chip-set class="flex flex-wrap justify-center gap-2 mb-4">
            <mat-chip *ngFor="let file of selectedFiles; let i = index" class="flex items-center">
                <mat-icon matChipAvatar>description</mat-icon>
                {{ file.name }}
                <button matChipRemove (click)="removeFile(i)">
                    <mat-icon>cancel</mat-icon>
                </button>
            </mat-chip>
        </mat-chip-set>
        <div class="flex justify-center gap-2">
            <button mat-raised-button color="primary" (click)="upload()" [disabled]="uploadButtonDisabled">
                <mat-icon>cloud_upload</mat-icon> Upload All
            </button>
            <button mat-stroked-button color="primary" (click)="fileInput.click()">
                <mat-icon>add</mat-icon> Add More
            </button>
            <button mat-button color="warn" (click)="selectedFiles = []">
                <mat-icon>clear</mat-icon> Clear All
            </button>
        </div>
    </div>

    <div *ngIf="isUploading" class="w-full max-w-xs mx-auto">
        <p class="mb-2 text-primary font-medium">Uploading {{ selectedFiles.length }} file(s)...</p>
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        <p class="mt-2 text-xs text-gray-500">This may take a while for large files</p>
    </div>
</div>